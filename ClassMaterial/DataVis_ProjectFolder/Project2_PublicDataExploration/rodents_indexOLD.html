<!DOCTYPE html>

<html lang="en">
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <!-- <link rel="stylesheet" type="text/css" href="./css/rodent_style.css"> -->
      <script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
      <style type="text/css">

          body{
            font-family:helvetica;
            padding:20px;
            background-color:white
          }

          #title {
            font-family:helvetica;
            font-size:34px;
            color:#65a937;
          }

          #RodentChart {

          }

          #button1{border:2px solid #000; border-radius:5px;padding:5px;width:100px;}


  		</style>
      <title>be2263 | Rat City</title>
    </head>
    <body> <!--onload="drawChart()"-->

      <div id="title">Berkhan Eminsoy | Spring '19 | RAT CITY</div>

      <div id="button1">MIX</div>

      <div id="RodentChart"></div>

      <script type="text/javascript">

        d3.csv("./data/311_Rodents2018_updt.csv")

          .then(function(data){
              drawChart(data, "r1")

              /*
              d3.select("button1")
                .on("click",function(){
                  updateChart(data,"r1")
                })

          })
          .catch(function(error){ console.log("error! " + error.name + error.message)})

        /*


        function drawChart(data, row){ //row refers to header rows in the csv file

          var w = 700
          var h = 300
          var yScale = d3.scaleLinear().domain([0,90]).range([0,h])
          var xScale = d3.scaleBand().domain(d3.range(data.length)).range([0,w]).round(true).paddingInner(.1)
          var cScale = d3.scaleLinear().domain([0,90]).range(["#aaa","#000"])

          var xAxis = d3.axisBottom()
              .scale(xScale)
           svg.append("g")
              .attr("class", "axis")
              .attr("transform", "translate("+padding+"," + (h) + ")")
              .call(xAxis);

          var yAxis = d3.axisLeft()
              .scale(yScale)
           svg.append("g")
              .attr("class", "axis")
              .attr("transform", "translate("+padding+",0)")
              .call(yAxis);

          var svg = d3.select("#RodentChart")
                      .append("svg")
                      .attr("width",w)
                      .attr("height",h)

          var button = d3.select("#button1")
                         .on("click",function(){
                             mixBars()
                         })

          var counts = {};

          rows.forEach(function(r) {
            var key = r.UniqueKey + r.CreatedDate + r.Descriptor + r.LocationType + r.IncidentZip + r.Borough;
            if (!counts[key]) {
                counts[key] = {
                  UniqueKey: r.UniqueKey,
                  CreatedDate: r.CreatedDate,
                  Descriptor: r.Descriptor,
                  LocationType: r.LocationType,
                  Zip: r.IncidentZip,
                  Borough: r.Borough,
                  count: 0
                };
            }
            counts[key].count++;
          });

          var rodentData = []; //data array holder for counted rows to be used with D3.
          Object.keys(counts).forEach(function(key) {
              console.log(counts,key)
              data.push(counts[key]);
          });

          svg.selectAll("rect")
             .data(data)
             .enter()
             .append("rect")
             .attr("x",function(d,i){
                 return xScale(i)
             })
             .attr("y",function(d){
                 return h-yScale(d.UniqueKey)
             })
             .attr("width",xScale.bandwidth())
             .attr("height",function(d){
                 return yScale(d.UniqueKey)
             })
             .attr("fill",function(d){
                 return cScale(d.UniqueKey)
             })
             .attr("opacity",.5)




        }

        */
      </script>

    </body>
